#!/bin/bash
set -x
# Ensure script is run as root
if [ "$EUID" -ne 0 ]; then
  echo "Please run as root"
  exit 1
fi



# Check if git is installed
if ! command -v git &> /dev/null; then
  echo "git could not be found, please install git first."
  exit 1
fi

# Clone the repository to /usr/share/sysdd
if [ ! -d /usr/share/sysdd ]; then
  sudo git clone https://github.com/yonasuriv/sysdd /usr/share/sysdd
  echo "sysdd repository cloned to /usr/share/sysdd"
else
  echo "/usr/share/sysdd already exists. Skipping git clone."
fi

# Copy the main script to /usr/bin
if [ -f ./modules/main ]; then
  sudo rm -rf /usr/bin/ssd
  sudo cp -n ./modules/main /usr/bin/sysdd
  sudo chmod +x /usr/bin/sysdd
  echo "sysdd script copied to /usr/bin"
else
  echo "Error: main script not found at ./modules/functions/core/main"
  exit 1
fi

echo "Installation complete."

set +x
